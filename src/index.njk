{%- from "system/component.njk" import component with context-%}
{%- from "system/connection-menu-items.njk" import connectionMenuItems  -%}
{%- from "system/page-menu-items.njk" import pageMenuItems -%}

<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Accessible Flow View - List Branch Conditions</title>
  <script type="importmap">
  {
    "imports": {
      "tabbable": "/assets/js/utils/tabbable.js"
    }
  }
  </script>
  <script type="module">
    document.documentElement.classList.remove('no-js');
    document.documentElement.classList.add('js');
  </script>



  <link rel="stylesheet" href="/assets/css/index.css">

  <script src="/assets/js/activated-menu.js" type="module"></script>
  <script src="/assets/js/flow-grid.js" type="module"></script>
  <script src="/assets/js/flow-item.js" type="module"></script>
</head>

<body>
<template id="flow-grid-template">
  <div role="row" part="row">
    <slot></slot>
  </div>
</template>

<template id="flow-item-template">
    <slot></slot>
</template>


<a href="#">before grid</a>


<h1 id="page-title">Pages Flow</h1>

<flow-grid aria-labelledby="page-title" aria-description="Use left and right arrow keys to navigate the pages in your form">
  {% set col = 1 %}

  {% for id, item in flow %}
    {{ component( item.component, {
      id: id,
      next: item.next,
      prev: item.prev,
      row: item.row if item.row else 1,
      col: item.col if item.col else col,
      title: item.title,
      type: item.type,
      variant: item.variant,
      conditions: item.conditions,
      page_menu_items: pageMenuItems,
      connection_menu_items: connectionMenuItems
    }) }}

    {% set col = col + 1 %}

    {% if item.component == 'branching-point' %}
      {% set col = col + 1 %}
    {% endif %}

  {% endfor %}

</flow-grid>

<a href="#">after grid</a>

</body>
</html>
